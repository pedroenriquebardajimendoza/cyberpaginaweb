<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Phone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Placeholder styling for loading state */
        .price-placeholder {
            display: inline-block;
            width: 60px;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 4px;
            animation: pulse 1.5s infinite ease-in-out;
        }
        .name-placeholder {
            display: inline-block;
            width: 120px;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 4px;
            animation: pulse 1.5s infinite ease-in-out;
        }
        @keyframes pulse {
            0% { background-color: #e0e0e0; }
            50% { background-color: #d0d0d0; }
            100% { background-color: #e0e0e0; }
        }
        /* Style for image container to be clickable */
        .product-image-container {
            cursor: pointer;
        }
        #details-modal-content ul {
            list-style-position: inside;
            padding-left: 1rem;
        }
        #details-modal-content li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-100">

  <div class="min-h-screen flex flex-col">

    <header class="bg-white text-black shadow-lg sticky top-0 z-40 border-b border-black">
      <div class="container mx-auto max-w-6xl px-4 py-3 sm:py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <img src="https://i.imgur.com/7pMyr4k.jpeg" alt="[Logo de Cyber Phone]" class="h-8 sm:h-10 w-auto">
          <span class="text-lg sm:text-xl font-semibold text-black">Cyber Phone</span>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-gray-700 hover:text-black transition-colors cursor-pointer">
            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
        </svg>
      </div>
    </header>

    <main class="flex-grow">
      <div class="container mx-auto max-w-6xl p-4 md:p-6 space-y-6 md:space-y-8">

        <section class="relative rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 group">
          <img src="https://i.imgur.com/gww8Xa4.png" 
               alt="[Imagen promocional de oferta especial]" 
               class="w-full h-56 sm:h-64 md:h-72 lg:h-80 object-cover transition-transform duration-500 group-hover:scale-105">
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent flex flex-col justify-end items-center text-center p-6 pb-8 sm:pb-10 md:pb-12 lg:pb-16">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-yellow-400 drop-shadow-lg">OFERTA ESPECIAL</h2>
            <p class="text-lg sm:text-xl md:text-2xl font-semibold text-yellow-400 drop-shadow-lg my-2 md:my-3">de 2025</p>
            <button class="bg-white text-green-700 px-5 py-2 sm:px-8 sm:py-3 rounded-lg font-bold text-sm md:text-base hover:bg-green-50 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 mt-2">COMPRAR</button>
          </div>
        </section>

        <section class="py-2">
          <div class="flex items-center justify-center space-x-2 sm:space-x-3 md:space-x-4 overflow-x-auto no-scrollbar">
            <span class="bg-white text-gray-700 px-4 py-2 md:px-5 md:py-2.5 rounded-full text-xs sm:text-sm font-medium shadow-sm border border-gray-200 cursor-pointer hover:bg-gray-50 hover:shadow-md transition-all whitespace-nowrap">ALL</span>
            <span class="bg-white text-gray-700 px-4 py-2 md:px-5 md:py-2.5 rounded-full text-xs sm:text-sm font-medium shadow-sm border border-gray-200 cursor-pointer hover:bg-gray-50 hover:shadow-md transition-all whitespace-nowrap">Paypal Verificado</span>
            <span class="bg-gray-800 text-white px-4 py-2 md:px-5 md:py-2.5 rounded-full text-xs sm:text-sm font-medium shadow-md cursor-pointer hover:bg-gray-700 hover:shadow-lg transition-all whitespace-nowrap">NÃºmeros Virtuales</span>
            <span class="bg-white text-gray-700 px-4 py-2 md:px-5 md:py-2.5 rounded-full text-xs sm:text-sm font-medium shadow-sm border border-gray-200 cursor-pointer hover:bg-gray-50 hover:shadow-md transition-all whitespace-nowrap">Otros</span>
          </div>
        </section>

        <section>
          <div class="flex justify-between items-center mb-4 md:mb-6">
            <h3 class="text-xl md:text-2xl font-semibold text-gray-800">POPULAR PRODUCTS</h3>
            <a href="#" class="text-sm text-green-600 hover:text-green-800 font-medium hidden sm:block transition-colors">View All &rarr;</a>
          </div>
          <div id="product-grid" class="grid grid-cols-2 gap-4 md:gap-6"> 
            
            <!-- Product Card 1 -->
            <div data-product-id="producto1" class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 group flex flex-col">
              <div class="product-image-container w-full h-48 sm:h-56 md:h-64 bg-gray-100 overflow-hidden">
                  <img src="https://placehold.co/400x400/e0e0e0/999999?text=Cargando..." 
                       alt="[Imagen de producto]" 
                       class="product-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
              </div>
              <div class="p-3 md:p-4 flex flex-col flex-grow">
                <h4 class="product-name text-sm md:text-base font-semibold text-gray-800 truncate group-hover:text-green-600 transition-colors flex-grow"><span class="name-placeholder"></span></h4>
                <p class="product-price text-base md:text-lg font-bold text-black mt-1">$<span class="price-placeholder"></span></p>
                <div class="product-actions hidden mt-3 space-y-2 sm:space-y-0 sm:space-x-2 text-center">
                    <button class="details-button bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-gray-300 transition-colors w-full sm:w-auto">Detalles</button>
                    <a href="https://t.me/pedrobardaji" target="_blank" class="buy-button bg-green-500 text-white px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-green-600 transition-colors inline-flex items-center justify-center w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
                        Comprar
                    </a>
                </div>
              </div>
            </div>

            <!-- Product Card 2 -->
            <div data-product-id="producto2" class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 group flex flex-col">
              <div class="product-image-container w-full h-48 sm:h-56 md:h-64 bg-gray-100 overflow-hidden">
                  <img src="https://placehold.co/400x400/e0e0e0/999999?text=Cargando..." 
                       alt="[Imagen de producto]" 
                       class="product-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
              </div>
              <div class="p-3 md:p-4 flex flex-col flex-grow">
                <h4 class="product-name text-sm md:text-base font-semibold text-gray-800 truncate group-hover:text-green-600 transition-colors flex-grow"><span class="name-placeholder"></span></h4>
                <p class="product-price text-base md:text-lg font-bold text-black mt-1">$<span class="price-placeholder"></span></p>
                <div class="product-actions hidden mt-3 space-y-2 sm:space-y-0 sm:space-x-2 text-center">
                    <button class="details-button bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-gray-300 transition-colors w-full sm:w-auto">Detalles</button>
                    <a href="https://t.me/pedrobardaji" target="_blank" class="buy-button bg-green-500 text-white px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-green-600 transition-colors inline-flex items-center justify-center w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
                        Comprar
                    </a>
                </div>
              </div>
            </div>

            <!-- Product Card 3 -->
            <div data-product-id="producto3" class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 group flex flex-col">
              <div class="product-image-container w-full h-48 sm:h-56 md:h-64 bg-gray-100 overflow-hidden">
                  <img src="https://placehold.co/400x400/e0e0e0/999999?text=Cargando..." 
                       alt="[Imagen de producto]" 
                       class="product-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
              </div>
              <div class="p-3 md:p-4 flex flex-col flex-grow">
                <h4 class="product-name text-sm md:text-base font-semibold text-gray-800 truncate group-hover:text-green-600 transition-colors flex-grow"><span class="name-placeholder"></span></h4>
                <p class="product-price text-base md:text-lg font-bold text-black mt-1">$<span class="price-placeholder"></span></p>
                <div class="product-actions hidden mt-3 space-y-2 sm:space-y-0 sm:space-x-2 text-center">
                    <button class="details-button bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-gray-300 transition-colors w-full sm:w-auto">Detalles</button>
                    <a href="https://t.me/pedrobardaji" target="_blank" class="buy-button bg-green-500 text-white px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-green-600 transition-colors inline-flex items-center justify-center w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
                        Comprar
                    </a>
                </div>
              </div>
            </div>

            <!-- Product Card 4 -->
            <div data-product-id="producto4" class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 group flex flex-col">
              <div class="product-image-container w-full h-48 sm:h-56 md:h-64 bg-gray-100 overflow-hidden">
                  <img src="https://placehold.co/400x400/e0e0e0/999999?text=Cargando..." 
                       alt="[Imagen de producto]" 
                       class="product-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
              </div>
              <div class="p-3 md:p-4 flex flex-col flex-grow">
                <h4 class="product-name text-sm md:text-base font-semibold text-gray-800 truncate group-hover:text-green-600 transition-colors flex-grow"><span class="name-placeholder"></span></h4>
                <p class="product-price text-base md:text-lg font-bold text-black mt-1">$<span class="price-placeholder"></span></p>
                <div class="product-actions hidden mt-3 space-y-2 sm:space-y-0 sm:space-x-2 text-center">
                    <button class="details-button bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-gray-300 transition-colors w-full sm:w-auto">Detalles</button>
                    <a href="https://t.me/pedrobardaji" target="_blank" class="buy-button bg-green-500 text-white px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold hover:bg-green-600 transition-colors inline-flex items-center justify-center w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
                        Comprar
                    </a>
                </div>
              </div>
            </div>

          </div>
        </section>

      </div>
    </main>

    <footer class="bg-gray-800 text-white text-center p-6 mt-auto">
      <p class="text-sm">&copy; 2025 Pedro Bardaji. Todos los derechos reservados</p>
      <p class="text-xs mt-1 opacity-75">Catalogo de productos Digitales</p>
    </footer>

  </div>

  <!-- Details Modal -->
    <div id="details-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4 transition-opacity duration-300 ease-in-out">
        <div class="bg-white rounded-lg shadow-2xl max-w-lg w-full p-6 relative max-h-[90vh] flex flex-col">
            <h3 id="details-modal-title" class="text-xl font-semibold mb-4 text-gray-900 flex-shrink-0">Detalles del Producto</h3>
            <div id="details-modal-content" class="text-gray-700 overflow-y-auto pr-4">
                <!-- El contenido del producto se insertarÃ¡ aquÃ­ -->
            </div>
            <button id="close-details-modal" class="absolute top-0 right-0 m-3 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
        </div>
    </div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        const productGrid = document.getElementById('product-grid');
        const detailsModal = document.getElementById('details-modal');
        const detailsModalTitle = document.getElementById('details-modal-title');
        const detailsModalContent = document.getElementById('details-modal-content');
        const closeDetailsModalButton = document.getElementById('close-details-modal');

        // --- AlmacÃ©n de descripciones de productos ---
        const productDescriptions = {
            'producto1': `
                <h4 class='font-bold text-lg mb-2'>TV Streaming</h4>
                <p class='font-semibold mb-3'>Lleva el cine a tu casa.</p>
                <ul class='list-disc space-y-2'>
                    <li>4 dispositivos al mismo tiempo diferente programaciÃ³n</li>
                    <li>Amplio catÃ¡logo de pelÃ­culas y series incluye canales de TV en vivo (+ 4500)</li>
                    <li>PPV deportes</li>
                    <li>+ de 30,000 PELÃCULAS</li>
                    <li>+ 3800 SERIES</li>
                    <li>250 ANIMES (+pelÃ­culas)</li>
                    <li>+ 1500 PELÃCULAS INFANTILES</li>
                    <li>+ 120 CARICATURAS RETRO</li>
                    <li>+ 220 NOVELAS Y PROGRAMAS DE TV</li>
                    <li>+ 200 CARICATURAS INFANTILES (+ series infantiles)</li>
                    <li>+ 750 PELÃCULAS MEXICANAS</li>
                    <li>+ 100 SERIES RETRO</li>
                    <li>100 DOCUMENTALES (SERIES)</li>
                    <li>50 DOCUMENTALES (PELICULAS)</li>
                    <li>+ 541 DORAMAS</li>
                    <li>+ 15 SERIES CRISTIANAS + PELICULAS</li>
                    <li>+ adultos XXX, (se puede bloquear)</li>
                    <li>+ ESTRENOS Y MUCHO MÃS.</li>
                </ul>
            `,
            'producto2': `
                <h4 class='font-bold text-lg mb-2'>Numeros Virtuales</h4>
                <p class='mb-4'>Â¿Necesitas crear o verificar una cuenta con un nÃºmero internacional? Te ofrecemos nÃºmeros virtuales para que puedas hacerlo de forma fÃ¡cil y rÃ¡pida.</p>
                <h5 class='font-semibold mb-2'>CaracterÃ­sticas del servicio:</h5>
                <ul class='list-disc space-y-2 mb-4'>
                    <li><b>NÃºmeros internacionales:</b> Utiles para cuentas de cualquier entidad.</li>
                    <li><b>Proceso sencillo:</b> Te proporcionamos el nÃºmero y el cÃ³digo de verificaciÃ³n necesario.</li>
                    <li><b>Permanencia:</b> Aunque el nÃºmero no serÃ¡ reutilizable, tu cuenta permanecerÃ¡ activa de por vida.</li>
                </ul>
                <p>Ideal para quienes buscan una soluciÃ³n prÃ¡ctica y confiable para obtener cuentas verificadas con numeros de Estados Unidos. Â¡ContÃ¡ctanos y solicita tu nÃºmero virtual hoy mismo!</p>
            `,
            'producto3': `
                <h4 class='font-bold text-lg mb-2'>Cuentas de PayPal</h4>
                <p class='mb-4'>Â¿Buscas una cuenta PayPal lista para usar? Ofrecemos cuentas personales verificadas, diseÃ±adas para brindarte la mÃ¡xima seguridad y confiabilidad.</p>
                
                <h5 class='font-semibold mb-2'>CaracterÃ­sticas del servicio:</h5>
                <ul class='list-disc space-y-2 mb-4'>
                    <li><b>Tipo de cuenta:</b> Personal.</li>
                    <li><b>PaÃ­s de registro:</b> Argentina.</li>
                    <li><b>VerificaciÃ³n completa:</b> Garantizamos que las cuentas ya estÃ¡n verificadas para un uso seguro y sin complicaciones.</li>
                    <li><b>Datos entregados:</b> Correo electrÃ³nico y contraseÃ±a (se recomienda cambiar la contraseÃ±a despuÃ©s de la compra).</li>
                    <li><b>MÃ©todo de pago:</b> No incluye tarjetas ni cuentas bancarias vinculadas; el usuario debe agregar su propio mÃ©todo de pago.</li>
                    <li><b>Saldo:</b> Las cuentas se entregan sin saldo.</li>
                </ul>

                <h5 class='font-semibold mb-2'>Recomendaciones de uso:</h5>
                <ul class='list-disc space-y-2 mb-4'>
                    <li>Utilizar siempre una VPN de Estados Unidos o Argentina para operar la cuenta y evitar restricciones.</li>
                </ul>

                <h5 class='font-semibold mb-2'>GarantÃ­a:</h5>
                <p class='mb-4'>Sin garantÃ­a: Dado que las cuentas salen verificadas, aseguramos su seguridad en el momento de la entrega.</p>
                
                <p>Adquiere una cuenta PayPal segura y verificada para manejar tus transacciones internacionales. Â¡ContÃ¡ctanos y consigue la tuya hoy mismo!</p>
            `,
            'producto4': `
                <h4 class='font-bold text-lg mb-2'>Tasa de Cambio</h4>
                <p>La tasa de cambio puede variar en cualquier momento. Por favor, siempre preguntar antes de realizar una transacciÃ³n.</p>
            `
        };


        // --- Function to open the details modal ---
        const openDetailsModal = (productId, productName) => {
            detailsModalTitle.textContent = `Detalles de ${productName}`;
            const descriptionHTML = productDescriptions[productId] || "<p class='text-gray-500'>Los detalles para este producto no estÃ¡n disponibles.</p>";
            detailsModalContent.innerHTML = descriptionHTML;
            if (detailsModal) detailsModal.classList.remove('hidden');
        };

        // --- Function to close the details modal ---
        const closeDetailsModal = () => {
            if (detailsModal) detailsModal.classList.add('hidden');
        };

        // --- Event listener for the entire product grid ---
        productGrid.addEventListener('click', (event) => {
            const detailsButton = event.target.closest('.details-button');
            if (detailsButton) {
                const productCard = detailsButton.closest('[data-product-id]');
                const productId = productCard.dataset.productId;
                const productName = productCard.querySelector('.product-name').textContent || "Producto";
                openDetailsModal(productId, productName);
                return; 
            }

            const imageContainer = event.target.closest('.product-image-container');
            if (imageContainer) {
                const currentCard = imageContainer.closest('[data-product-id]');
                if (!currentCard) return;

                const actionsDiv = currentCard.querySelector('.product-actions');
                
                document.querySelectorAll('.product-actions').forEach(div => {
                    if (div !== actionsDiv) {
                        div.classList.add('hidden');
                    }
                });

                if (actionsDiv) {
                    actionsDiv.classList.toggle('hidden');
                }
            }
        });

        // --- Listeners to close the details modal ---
        if(closeDetailsModalButton) closeDetailsModalButton.addEventListener('click', closeDetailsModal);
        
        if(detailsModal) {
            detailsModal.addEventListener('click', (event) => {
                if (event.target === detailsModal) {
                    closeDetailsModal();
                }
            });
        }
        
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && !detailsModal.classList.contains('hidden')) {
                closeDetailsModal();
            }
        });
        
        // --- Product Loading Logic (from Google Sheets) ---
        const originalCsvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRAzub5O0Eib_WB9oYN8NmFaLYhhfA2Zbs3NshisHVBwTU6YFoU1Ed0HV_j5VCGpSLiDxfh--YqwhT_/pub?gid=0&single=true&output=csv'; 
        const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(originalCsvUrl)}`;
        
        fetch(proxyUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Error en la respuesta del proxy: ${response.status} ${response.statusText}`);
                }
                return response.text();
            })
            .then(csvText => {
                const products = parseCSV(csvText);
                updateProductsUI(products);
            })
            .catch(error => {
                console.error('Error al obtener o procesar los datos de productos:', error);
                if (productGrid) {
                    const existingErrorMsg = productGrid.querySelector('.fetch-error-message');
                    if (existingErrorMsg) existingErrorMsg.remove();
                    const errorMessage = document.createElement('p');
                    errorMessage.textContent = 'No se pudieron cargar los productos. Intenta recargar la pÃ¡gina.';
                    errorMessage.className = 'text-red-500 text-center col-span-full fetch-error-message';
                    productGrid.prepend(errorMessage);
                }
            });

        function parseCSV(csvText) {
            const lines = csvText.trim().split(/\r?\n/); 
            if (lines.length < 2) return [];

            const headers = lines[0].split(',').map(header => header.trim().replace(/^"|"$/g, ''));
            const productsArray = [];

            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim() === '') continue;
                const values = lines[i].split(',').map(value => value.trim().replace(/^"|"$/g, ''));
                const product = {};
                for (let j = 0; j < headers.length; j++) {
                    if (headers[j]) {
                        product[headers[j]] = values[j] || '';
                    }
                }
                if (product.id_producto) {
                    productsArray.push(product);
                }
            }
            return productsArray;
        }

        function updateProductsUI(products) {
            if (!products || products.length === 0) {
                console.warn("No hay productos para mostrar.");
                return;
            }

            products.forEach(productData => {
                const productCard = document.querySelector(`[data-product-id="${productData.id_producto}"]`);
                if (productCard) {
                    const nameElement = productCard.querySelector('.product-name');
                    const priceElement = productCard.querySelector('.product-price');
                    const imageElement = productCard.querySelector('.product-image');

                    if (nameElement) nameElement.textContent = productData.nombre_producto || "Nombre no disponible";
                    if (priceElement) {
                        const price = parseFloat(String(productData.precio_producto).replace(',', '.')); 
                        priceElement.textContent = `$${isNaN(price) ? '--.--' : price.toFixed(2)}`;
                    }
                    if (imageElement && productData.imagen_url_producto) {
                        imageElement.src = productData.imagen_url_producto;
                        imageElement.alt = `[Imagen de ${productData.nombre_producto || 'producto'}]`;
                        const imageContainer = imageElement.closest('.product-image-container');
                        if (imageContainer) imageContainer.style.backgroundColor = 'transparent';
                    }
                }
            });
        }
    });
</script>

</body>
</html>
